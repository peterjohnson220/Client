<pf-async-container [loading]="ticketListLoading$ | async"
                    [loadingError]="ticketListLoadingError$ | async"
                    [loadingErrorMessage]="'Error Loading Tickets'"
                    (reload)="handleTicketGridReload">
  <kendo-grid class="row-click-navigates"
              #ticketGrid
              [data]="gridView"
              [sortable]="{
                allowUnsort: false,
                mode: 'single'
              }"
              [pageable]="{
                pageSizes: pageSizes
              }"
              [pageSize]="pageSize"
              [sort]="sort"
              [skip]="skip"
              [scrollable]="'none'"
              (sortChange)=sortChange($event)
              (pageChange)="pageChange($event)">
    <kendo-grid-column field="Status"
                       title="Status"
                       width="40">
      <ng-template kendoGridCellTemplate
                   let-dataItem>
        <div [innerHTML]="dataItem.Status"></div>
      </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="Type"
                       title="Type"
                       width="75">
      <ng-template kendoGridCellTemplate
                   let-dataItem>
        <div><h4><span class="badge {{dataItem.TicketCssClass}}">{{dataItem.Type}}</span></h4></div>
      </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="Id"
                       title="ID"
                       width="30">
      <ng-template kendoGridCellTemplate
                   let-dataItem>
        <a class="ticket-link" href="javascript:void(0)" (click)="handleCellClick(dataItem)">{{dataItem.Id}}</a>
      </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="CompanyName"
                       title="Client"
                       width="60">
      <ng-template kendoGridCellTemplate
                   let-dataItem>
        <div [innerHTML]="dataItem.CompanyName"></div>
      </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="Description"
                       title="Description"
                       width="100">
      <ng-template kendoGridCellTemplate
                   let-dataItem>
        <div>{{dataItem.Description.length > 150 ? dataItem.Description.substring(0,150) +  '...' : dataItem.Description}}</div>
      </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="Created"
                       title="Created"
                       width="35">
      <ng-template kendoGridCellTemplate
                   let-dataItem>
        <div [innerHTML]="dataItem.Created | date:'LL/dd/yyyy'"></div>
      </ng-template>
    </kendo-grid-column>

    <kendo-grid-column field="ServiceUser"
                       title="Assigned To"
                       width="60">
      <ng-template kendoGridCellTemplate
                   let-dataItem>
        <div [innerHTML]="dataItem.ServiceUser"></div>
      </ng-template>
    </kendo-grid-column>
  </kendo-grid>
</pf-async-container>
