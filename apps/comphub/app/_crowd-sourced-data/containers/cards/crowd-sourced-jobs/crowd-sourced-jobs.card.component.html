<pf-jobs-card-wrapper>
  <ng-container jobsCardContent>
    <div class="row">
      <div class="col-lg-12 col-xl-9">

        <!--this is currently using market data we will have to update to use crowd sourced data-->
        <div class="data-set-selector" *ngIf="(countryDataSets$ | async)?.length > 1">
          <kendo-dropdownlist
            (valueChange)="handleCountryDataSetChanged($event)"
            class="form-control"
            textField="CountryCode"
            valueField="CountryCode"
            [data]="countryDataSets$ | async"
            [valuePrimitive]="true"
            [ngModel]="workflowContext?.activeCountryDataSet?.CountryCode">

            <ng-template kendoDropDownListItemTemplate let-dataItem>
              <img src="assets/images/blank.gif" class="flag flag-{{dataItem?.FlagCode | lowercase}} mr-2" /> {{ dataItem?.CountryCode }}
            </ng-template>
            <ng-template kendoDropDownListValueTemplate let-dataItem>
              <img src="assets/images/blank.gif" class="flag flag-{{dataItem?.FlagCode | lowercase}} mr-2" /> {{ dataItem?.CountryCode }}
            </ng-template>

          </kendo-dropdownlist>
        </div>
        <kendo-autocomplete
          #jobSearch
          class="w-100 mt-4"
          placeholder="Search for a Job Title..."
          [data]="(jobSearchOptions$ | async)"
          [value]="!(jobPricingBlocked$ | async) ? (selectedJob$ | async) : ''"
          [filterable]="true"
          [loading]="loadingJobSearchOptions$ | async"
          [disabled]="jobPricingBlocked$ | async"
          [popupSettings]="popupSettings"
          [attr.data-qa-id]="'txt-job-search'"
          (close)="handleSearchClosed()"
          (valueChange)="handleJobSearchValueChanged($event)"
          (filterChange)="handleJobSearchFilterChange($event)">
          <ng-template kendoAutoCompleteNoDataTemplate>
            No matching job titles
          </ng-template>
        </kendo-autocomplete>
        </div>
    </div>

    <!-- TODO hardcoded just to check functionality. Should be rewritten -->
    <pf-market-data-job-grid></pf-market-data-job-grid>

    <!--trending jobs will be added here look at jobs.card.component.html-->
  </ng-container>
</pf-jobs-card-wrapper>
