<div *ngIf="statement" class="container statement mb-4 rounded" [ngClass]="fontSizeCssClass + ' ' + fontFamilyCssClass">
  <div *ngFor="let employee of employees; trackBy: trackByFn">
    <div class="d-flex justify-content-end">
      <pf-effective-date 
        [mode]="mode"
        [effectiveDate]="statement.EffectiveDate"
        (onDateChange)="handleEffectiveDateChange($event)">
      </pf-effective-date>
    </div>
    <div *ngFor="let page of statement.Pages; trackBy: trackByFn" class="pb-4 trs-page mt-n4">
      <section *ngFor="let section of page.Sections; trackBy: trackByFn" class="row vertical-divider trs-section">
        <div *ngFor="let column of section.Columns; trackBy: trackByFn" [ngClass]="'col-' + column?.Layout?.Width" class="trs-column">
          <div class="row columnRow h-100">
            <div *ngFor="let control of column.Controls; trackBy: trackByFn" [ngClass]="'col-' + control?.Layout?.Width + ' control-type-' + control.ControlType">
              <div *ngIf="control.ControlType === controlType.RichTextEditor">
                <pf-trs-rich-text-control
                  [controlData]="control"
                  [mode]="mode"
                  [employeeRewardsData]="employeeRewardsData"
                  (onTitleChange)="handleOnControlTitleChange($event)"
                  (onContentChange)="handleOnRichTextControlContentChange($event)"
                  class="p-1"></pf-trs-rich-text-control>
              </div>

              <div *ngIf="control.ControlType === controlType.Image">
                <pf-trs-image-control
                  [controlData]="control"
                  [statementId]="statement.StatementId"
                  [mode]="mode"
                  (saveImage)="handleSaveImage($event)"
                  (removeImage)="handleRemoveImage($event)"
                  class="p-1"></pf-trs-image-control>
              </div>

              <div *ngIf="control.ControlType === controlType.Calculation">
                <pf-trs-calculation-control
                  [controlData]="control"
                  [mode]="mode"
                  [employeeRewardsData]="employeeRewardsData"
                  (onTitleChange)="handleOnControlTitleChange($event)"
                  (onCompFieldTitleChange)="handleOnCalculationControlCompFieldTitleChange($event)"
                  (onUpdateSummaryTitleChange)="handleOnCalculationControlSummaryTitleChange($event)"
                  (onCompFieldRemoved)="handleOnCalculationControlCompFieldRemoved($event)"
                  (onCompFieldAdded)="handleOnCalculationControlCompFieldAdded($event)"></pf-trs-calculation-control>
              </div>

              <div *ngIf="control.ControlType === controlType.Chart">
                <pf-trs-chart-control
                  [controlData]="control"
                  [mode]="mode"
                  [employeeRewardsData]="employeeRewardsData"
                  [calculationControls]="calculationControls"
                  [chartColors]="statement.Settings.ChartColors"
                  (onTitleChange)="handleOnControlTitleChange($event)"
                  (settingsClick)="handleChartControlSettingsClick()"
                  class="p-1"></pf-trs-chart-control>
              </div>

              <div *ngIf="control.ControlType === controlType.Title">
                <pf-trs-title-control
                  [controlData]="control"
                  [mode]="mode"
                  [employeeRewardsData]="employeeRewardsData"
                  (titleChange)="handleOnControlTitleChange($event)"
                  class="p-1"></pf-trs-title-control>
              </div>

              <div *ngIf="control.ControlType === controlType.CalculationSummary">
                <pf-trs-summary-control
                  [mode]="mode"
                  [controlData]="control"
                  [employeeRewardsData]="employeeRewardsData"
                  [calculationControls]="calculationControls"
                  (onTitleChange)="handleOnControlTitleChange($event)"
                  class="p-1"></pf-trs-summary-control>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
    <div class="page-break"></div>
  </div>
</div>
