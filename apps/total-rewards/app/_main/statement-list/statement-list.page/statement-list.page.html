<pf-page-with-title-bar>

  <ng-container page-title>
    <fa-icon class="mr-2" [icon]="'dollar-sign'" aria-hidden="true"></fa-icon>Total Rewards Statements
  </ng-container>

  <ng-container page-actions>
    <pf-input-debounce class="mr-2"
                       [value]="(statementsSearchTerm$| async)"
                       [disabled]="(focusedTab$ | async) !== 'Statements' ||
                                  (!(statementsTotal$ | async) && !(statementsSearchTerm$ | async))"
                       [placeholderText]="'Search...'"
                       [automationClassName]="'au-tb-search'"
                       (valueChanged)="onSearchTermChange($event)"
    >
    </pf-input-debounce>
  </ng-container>

  <ng-container page-content>
    <div class="d-flex flex-column h-100">
      <div class="mh-100">

        <ngb-tabset #tabRef="ngbTabset"
                    [destroyOnHide]="false"
                    (tabChange)="onTabChange()">

          <ngb-tab id="Statements" title="Statements">
            <ng-template ngbTabContent >
              <div class="h-100" *ngIf="(statementsTotal$ | async) > 0 || (statementsLoading$ | async) ||
                              (statementsLoadingError$ | async); else doNotShowGrid">
                <pf-statements-grid ></pf-statements-grid>
              </div>
              <ng-template #doNotShowGrid>
                <pf-create-new-statement-banner (createNewClicked)="tabRef.select('Templates')">
                </pf-create-new-statement-banner>
              </ng-template>
            </ng-template>
          </ngb-tab>

          <ngb-tab id="Templates" title="Templates">
            <ng-template ngbTabContent>
              <h4>Templates will go here.</h4>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>

      </div>
    </div>
  </ng-container>

</pf-page-with-title-bar>
