<div class="d-flex">
  <div class="d-flex job-details-bottom-border hide-sm py-1">
    <div class="my-auto px-3">
      <div pfEllipsisActive class="ellipsis-overflowing-text-wrap job-title-code">
        <fa-icon [icon]="['far', 'briefcase']" size="lg" class="pr-3"></fa-icon>
        <pf-job-title-code 
          [jobTitle]="(selectedRow$ | async).CompanyJobs_Job_Title"
          [jobCode]="(selectedRow$ | async).CompanyJobs_Job_Code"
          [jobTitleClass]="'font-weight-bold'">
        </pf-job-title-code>        
      </div>
    </div>
    <div class="vertical-separator my-2 ml-auto"></div>
  </div>
  <ngb-tabset [destroyOnHide]="false" (tabChange)="tabChange($event)">
    <ngb-tab [title]="'Pricing Details'" [id]="pageViewIds.PricingDetailsTabContainer">
      <ng-template ngbTabContent>
        <div class="full-height" *ngIf="tabStatusOpened[pageViewIds.PricingDetailsTabContainer] === true">
          <div [style.display]="pricingDetailsView === 'Not Priced' ? 'none' : 'inline'">
            <pf-pricing-details-grid [filters]="jobDetailsFilters" [unPricedCount]="notPricedCount"></pf-pricing-details-grid>
          </div>
          <div [style.display]="pricingDetailsView === 'Priced' ? 'none' : 'inline'">
            <pf-not-priced-paymarkets-grid [filters]="jobDetailsFilters" [pricedCount]="pricedCount"></pf-not-priced-paymarkets-grid>
          </div>
        </div>
      </ng-template>
    </ngb-tab>
    <ngb-tab [title]="'Job Description'" [id]="'JobDescriptionTab'">
      <ng-template ngbTabContent>
        <div *ngIf="tabStatusOpened['JobDescriptionTab'] === true" class="full-height">
          <pf-job-description [filters]="jobDetailsFilters"></pf-job-description>
        </div>
      </ng-template>
    </ngb-tab>
    <ngb-tab [title]="'Employees'" [id]="pageViewIds.Employees">
      <ng-template ngbTabContent>
        <div *ngIf="tabStatusOpened[pageViewIds.Employees] === true" class="full-height">
          <pf-employees-grid [filters]="jobDetailsFilters"></pf-employees-grid>
        </div>
      </ng-template>
    </ngb-tab>
    <ngb-tab [title]="'Structures'" [id]="pageViewIds.Structures">
      <ng-template ngbTabContent>
        <div *ngIf="tabStatusOpened[pageViewIds.Structures] === true" class="full-height">
          <pf-structure-grid [filters]="jobDetailsFilters"></pf-structure-grid>
        </div>
      </ng-template>
    </ngb-tab>
    <ngb-tab [title]="'Projects'" [id]="pageViewIds.Projects">
      <ng-template ngbTabContent>
        <div *ngIf="tabStatusOpened[pageViewIds.Projects]  === true" class="full-height">
          <pf-project-details-grid [filters]="jobDetailsFilters"></pf-project-details-grid>
        </div>
      </ng-template>
    </ngb-tab>
    <ngb-tab [title]="'History'" [id]="pageViewIds.PricingHistory">
      <ng-template ngbTabContent>
        <div *ngIf="tabStatusOpened[pageViewIds.PricingHistory]  === true" class="full-height">
          <pf-pricing-history-grid [filters]="jobDetailsFilters"></pf-pricing-history-grid>
        </div>
      </ng-template>
    </ngb-tab>
  </ngb-tabset> 
  <div class="job-details-bottom-border d-flex flex-fill">   
    <div class="my-auto ml-auto pr-3">
      <div (click)="close()" class="close-btn">
        <fa-icon [icon]="['far', 'times']" size="lg"></fa-icon>
      </div>
    </div>
  </div>  
</div>
