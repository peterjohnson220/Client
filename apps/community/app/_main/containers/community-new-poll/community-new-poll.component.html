
  <div class="form-group" [formGroup]="communityPollForm"> 
  
    <kendo-dropdownlist #topicList class="pb-2 w-75"
            [defaultItem]="defaultTopic"
            [data]="communityTopics$ | async"
            [textField]="'TopicName'"
            [valueField]="'Id'"
            [valuePrimitive]="true"
            (open)="onOpenTopicsList()"
            formControlName="topic">          
    </kendo-dropdownlist>

    <pf-community-text-area class="pt-5"
      [parentForm]="communityPollForm"
      [maxTextLength]="maxTextLength"
      [warningStartNumber]="200"
      [dangerStartNumber]="225"
      [pfFocus]="true"
      textPlaceholder="Ask a question...">
    </pf-community-text-area>

    <ng-container *ngIf="context.errors && attemptedSubmit">
      <div *ngIf="context.errors.required" class="invalid-feedback">Question is required.</div>
      <div *ngIf="context.errors.error" class="invalid-feedback">{{context.errors.error}}</div>
    </ng-container>
    
    <div class="pr-5">
      <pf-community-poll-choices
        *ngFor="let item of choices.controls; let i=index; let last = last"
        [index]="i"
        [item]="item"
        [isLastChoice]="last"
        (removed)="choices.removeAt($event)"
        (added)="addResponseOption()"
        class="pr-0">
      </pf-community-poll-choices>
    </div>

    <div class="pl-4 row">
      <label class="col-form-label" for="duration">Poll Length:</label>
      <button #duration type="button" class="btn btn-link" (click)="configurePollLength()">{{pollLengthText}}</button>   
      
      <div *ngIf="displayPollLengthChoices">
        <label class="col-form-label" for="days">Days </label>
        <select #days  class="poll-length-dropdown ml-2 mr-4"
          formControlName="days"
          (change)="onDurationDaysChange()">
          <option *ngFor="let day of pollLengthDays" [ngValue]="day">{{day}}</option>
        </select>
        <label class="col-form-label" for="hours">Hours </label>
        <select #hours class="poll-length-dropdown ml-2"
          formControlName="hours">
          <option *ngFor="let hour of pollLengthHours" [ngValue]="hour" [disabled]="hour===0 && isPollDurationDaysZero()">{{hour}}</option>
        </select>
      </div> 
    </div>

  </div>