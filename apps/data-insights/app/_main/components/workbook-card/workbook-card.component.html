<div *ngIf="!!workbook"
  class="workbook-container d-flex"
  (mouseover)="handleMouseOverWorkbookContainer()"
  (mouseleave)="handleMouseLeaveWorkbookContainer()">

  <div class="actions-container" [ngClass]="displayActionsOverlay ? 'displayed' : ''">
    <button class="btn action-button" (click)="handleFavoriteClicked(workbook)">
      <fa-icon *ngIf="workbook.IsFavorite" [icon]="['fas', 'star']" class="action-icon d-inline-flex solid-star"></fa-icon>
      <fa-icon *ngIf="!workbook.IsFavorite" [icon]="['far', 'star']" class="action-icon d-inline-flex"></fa-icon>
    </button>
    <button class="btn action-button" (click)="handleTagClicked(workbook)">
      <fa-icon *ngIf="workbook.Tag" [icon]="['fas', 'tag']" class="action-icon brand-secondary"></fa-icon>
      <fa-icon *ngIf="!workbook.Tag" [icon]="['far', 'tag']" class="action-icon"></fa-icon>
    </button>
    <div class="open-workbook">
      <a class="btn" title="Open Workbook" [routerLink]="['/company-reports',workbook.WorkbookId]" [queryParams]="{showTabs: true, title: workbook.WorkbookName}">
        Open
      </a>
      <div class="vertical-separator h-100"></div>
      <button class="btn open-views"
              [ngbPopover]="popContent"
              [popoverClass]="'workbook-views-popover'"
              [placement]="'bottom'"
              [popoverTitle]="workbook.WorkbookName"
              [autoClose]="'outside'"
              (shown)="handleOpenViewsClicked(workbook)"
              (hidden)="handleViewsHidden()">
        <fa-icon title="Open Views" [icon]="['fas','caret-down']" class="action-icon open-arrow"></fa-icon>
      </button>

    </div>
  </div>

  <div class="d-flex actions-overlay" [ngClass]="displayActionsOverlay ? 'displayed' : ''"></div>

  <ng-container *ngIf="!!workbook.IconClass?.length">
    <fa-icon [icon]="workbook.IconClass" class="icon fa-fw"></fa-icon>
    <div class="vertical-separator"></div>
  </ng-container>
  <div class="d-flex flex-column ml-3 content">
    <span class="tag" data-toggle="tooltip" title="{{workbook.Tag || workbook.DefaultTag}}">{{workbook.Tag || workbook.DefaultTag}}</span>
    <span class="workbook-name" data-toggle="tooltip" title="{{workbook.WorkbookName}}">{{workbook.WorkbookName}}</span>
  </div>

  <ng-template #popContent>
    <pf-workbook-views [workbook]="workbook"></pf-workbook-views>
  </ng-template>

</div>
