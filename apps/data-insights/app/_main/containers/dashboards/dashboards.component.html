<div class="dashboards position-relative h-100">
  <div class="top-bar">
    <div class="title">
      <kendo-dropdownlist *ngIf="anyFavorites; else allDashboards"
                          class="dashboard-view"
                          [attr.data-qa-id]="'ddm-dashboard-views'"
                          [data]="dashboardViews"
                          [ngModel]="dashboardView$ | async"
                          (valueChange)="handleViewChanged($event)">
      </kendo-dropdownlist>
      <ng-template #allDashboards>
        <span class="d-inline-block">All Dashboards</span>
      </ng-template>
    </div>
  </div>
  <ng-container *ngIf="(companyWorkbooksAsync$ | async) as companyWorkbooksAsync">
    <pf-async-container
      [loading]="companyWorkbooksAsync.loading"
      [loadingError]="companyWorkbooksAsync.loadingError"
      [loadingErrorMessage]="'Error Loading Dashboards'"
      [hideReloadButton]="true">

      <div class="container-fluid">
        <div class="row">
          <ng-container *ngIf="filteredCompanyWorkbooks?.length">
            <div *ngFor="let workbook of filteredCompanyWorkbooks; trackBy: trackByFn"
                 class="col-xs-12 col-md-6 col-lg-4 col-xl-3">
              <pf-workbook-card
                [workbook]="workbook"
                (favoriteClicked)="handleFavoriteClicked($event)">
              </pf-workbook-card>
            </div>
          </ng-container>
        </div>
      </div>
    </pf-async-container>
  </ng-container>
</div>
