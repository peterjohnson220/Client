<ng-container *ngIf="(companyWorkbooksAsync$ | async) as companyWorkbooksAsync">
  <pf-async-container
    [loading]="companyWorkbooksAsync.loading"
    [loadingError]="companyWorkbooksAsync.loadingError"
    [loadingErrorMessage]="'Error Loading Dashboards'"
    [hideReloadButton]="true">
  </pf-async-container>

  <pf-dashboards-header [thumbnailsViewEnabled]="false" [hasFavorites]="anyFavorites"></pf-dashboards-header>

  <div *ngIf="filteredCompanyWorkbooks" class="dashboards h-100 d-flex flex-column">

    <div class="workbooks-container row" dragula="workbooks" [(dragulaModel)]="filteredCompanyWorkbooks">
      <ng-container *ngIf="filteredCompanyWorkbooks?.length">
        <div *ngFor="let workbook of filteredCompanyWorkbooks; trackBy: trackByFn"
              class="col-xs-12 col-md-6 col-lg-4 col-xl-3 workbook-card">
          <pf-workbook-card
            [workbook]="workbook"
            (favoriteClicked)="handleFavoriteClicked($event)"
            (tagClicked)="handleTagWorkbookClicked($event)"
            (openViewsClicked)="handleOpenViewsClicked($event)">
          </pf-workbook-card>
        </div>
      </ng-container>
    </div>

  </div>
</ng-container>

<pf-tag-workbook-modal
  [selectedWorkbook]="selectedWorkbook"
  [saving]="savingTag$ | async"
  [tags]="tags$ | async"
  (saveClicked)="handleSaveTagClicked($event)">
</pf-tag-workbook-modal>
