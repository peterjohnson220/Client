<pf-async-container
  [loading]="upsertingDataCut$ | async"
  [loadingError]="upsertingDataCutError$ | async"
  [loadingErrorMessage]="'Error adding data cut, please close the modal and try again.'"
  [hideReloadButton]="true">

  <div class="d-flex h-100 w-100">
    <div class="h-100 filters-container">
      <pf-peer-data-cut-filter-sidebar
        [companyPayMarketId]="companyPayMarketId">
      </pf-peer-data-cut-filter-sidebar>
    </div>
    <div class="flex-grow-1 d-flex flex-column">
      <div class="map-container flex-grow-1">
        <pf-peer-data-cut-map
          *ngIf="systemFilter$ | async"
          [canFitBounds]="upsertDataCutPageInViewInIframe$ | async">
        </pf-peer-data-cut-map>
      </div>
      <div class="button-container d-flex justify-content-end align-items-center">
        <pf-guidelines-badge *ngIf="initialMapMoveComplete$ | async"
                             [companies]="(peerMapSummary$ | async)?.OverallMapStats.Companies"
                             [guidelineLimits]="guidelineLimits"
                             [validDataCut]="validDataCut">
        </pf-guidelines-badge>

        <div class="buttons">
          <button type="button" class="btn btn-primary"
                  [disabled]="failsGuidelines"
                  (click)="upsert()">{{primaryButtonText}}</button>

          <button type="button" class="btn btn-secondary" (click)="cancel()">Cancel</button>
        </div>
      </div>
    </div>
  </div>

</pf-async-container>
