<div class="result job-result-row" [ngClass]="{'payfactors-job-result': job.IsPayfactors,'selected-job-result': job.IsSelected}">
  <div class="d-flex justify-content-between">
    <div class="d-flex">
      <div class="job-title">
        {{job.Title}}
      </div>
      <div class="job-code">
        ({{job.Code}})
      </div>
    </div>
    <div *ngIf="!!job.Matches"
         class="matches"
         (mouseenter)="handleMatchesMouseEnter($event)"
         (mouseleave)="handleMatchesMouseLeave()">
      {{job.Matches}}
    </div>
  </div>

  <div class="vendor">
    {{job.Source}}
    <ng-container *ngIf="!job.IsPayfactors">- {{job.SurveyName}} ({{job.EffectiveDate | date: 'shortDate'}})</ng-container>
  </div>

  <div *ngIf="showJobDetail" class="job-detail">
    <table>
      <tbody>
        <tr>
          <th>Family:</th>
          <td>{{job.Family || '-'}}</td>
        </tr>
        <tr>
          <th>Level:</th>
          <td>{{job.Level || '-'}}</td>
        </tr>

        <ng-container *ngIf="job.IsPayfactors && !!job.Category">
          <tr>
            <th>Job Category:</th>
            <td>{{job.Category || '-'}}</td>
          </tr>
          <tr>
            <th>EEO:</th>
            <td>{{job.EEO || '-'}}</td>
          </tr>
        </ng-container>

        <tr>
          <th>Job Description:</th>
          <td>
            <ng-container *ngIf="job.Description; else noJobDescription">
              <pf-ellipsis-view-more [copy]="true" [content]="job.Description" [maxLength]="300"></pf-ellipsis-view-more>
          </ng-container>
          </td>
        </tr>
      </tbody>

    </table>
  </div>

  <div class="d-flex mt-2">
    <div class="link au-lnk-show-hide-data-cuts" (click)="toggleDataCutsDisplay()">
      {{toggleDataCutsLabel}}
    </div>
    <div class="link mx-2">
      |
    </div>
    <div class="link au-lnk-show-hide-job-details" (click)="toggleJobDetailDisplay()">
      {{toggleJobDetailLabel}}
    </div>
  </div>

  <div *ngIf="showDataCuts && !job.LoadingDataCuts">
    <pf-data-cuts [job]="job"
                  [dataCuts]="job.DataCuts"
                  [currencyCode]="currencyCode"
                  (dataCutSelected)="handleDataCutSelected($event)"
                  (payFactorsCutSelected)="handlePayfactorsCutSelected()"
                  (matchesMouseEnter)="handleDataCutMatchesMouseEnter($event)"
                  (matchesMouseLeave)="handleMatchesMouseLeave()">
    </pf-data-cuts>

    <span *ngIf="hasMoreDataCuts && !job.LoadingMoreDataCuts" class="link" (click)="handleLoadDataCuts()">Load More</span>
  </div>
  <div class="my-2" *ngIf="job.LoadingDataCuts || job.LoadingMoreDataCuts">
    <pf-loading-indicator [spinnerType]="'GIF'"></pf-loading-indicator> Loading Data Cuts...
  </div>
</div>


<ng-template #noJobDescription>
  <div class="no-job-description">
    No Job Description
  </div>
</ng-template>

