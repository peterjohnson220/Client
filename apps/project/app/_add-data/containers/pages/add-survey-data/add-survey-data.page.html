<div class="add-survey-data-header">
  <div class="d-flex align-items-center h-100 pr-3">
    <pf-filter-pills [filters]="filters$ | async" (pillClicked)="handlePillClicked($event)"></pf-filter-pills>

    <pf-search-actions (reset)="handleResetFilters()" (saveFilters)="handleSaveFilters($event)"></pf-search-actions>
  </div>
</div>


<div class="filters-and-results">

  <div class="filters-sidebar">
    <pf-search-filters
      [visible]="!(searchingFilter$ | async)">
    </pf-search-filters>

    <pf-single-filter
      *ngIf="searchingFilter$ | async">
    </pf-single-filter>
  </div>

  <div class="results-and-actions">
    <pf-search-results></pf-search-results>

    <div class="actions-container">
      <div class="buttons">
        <button (click)="handleAddClicked()" [disabled]="(addingData$ | async) || !(selectedCuts$ | async).length"
                class="btn btn-sm legacy-primary-btn mr-3">
          <ng-container *ngIf="!(addingData$ | async); else addingData">
            Add
            <span *ngIf="(selectedCuts$ | async)?.length">({{(selectedCuts$ | async).length}})</span>
          </ng-container>
        </button>

        <button (click)="handleCancelClicked()" class="btn btn-sm btn-secondary mr-3">
          Cancel
        </button>

        <div class="exclude-from-participation">
          <input type="checkbox" id="excludeFromParticipation" [(ngModel)]="excludeFromParticipation" class="mr-2"/>
          <label class="mb-0" for="excludeFromParticipation">Exclude from Participation</label>
        </div>
      </div>
      <div class="results-count">
        <strong>{{(numberOfResults$ | async).toLocaleString('en')}}</strong> Jobs
      </div>
    </div>
  </div>
</div>

<ng-template #addingData>
  Adding...
</ng-template>
