<div class="results-header">
  <table>
    <thead>
      <tr>
        <th class="growing-cell text-center">Title</th>
        <th class="fixed-cell">Country</th>
        <th class="fixed-cell">Weighting</th>
        <th class="fixed-cell">Base 50th</th>
        <th class="fixed-cell">TCC 50th</th>
        <th class="fixed-cell">Matches</th>
      </tr>
    </thead>
  </table>
</div>

<pf-async-container [loading]="loadingResults$ | async">
  <div *ngIf="(jobResults$ | async)?.length; else noResultsMessage"
       #results
       class="results"
       infinite-scroll
       [scrollWindow]="false"
       [infiniteScrollDistance]="3"
       (scroll)="handleResultsScroll()"
       (scrolled)="onScroll()">

    <table>
      <tbody>
        <tr *ngFor="let jobResult of jobResults$ | async;index as tooltipIndex"
            pf-job-result
            [job]="jobResult"
            (jobTitleClick)="handleJobTitleClick($event, tooltipIndex)">
        </tr>

        <tr class="loading-more-row" *ngIf="loadingMoreResults">
          <td colspan="6"><pf-loading-indicator></pf-loading-indicator> Loading More Results...</td>
        </tr>
      </tbody>
    </table>

  </div>
</pf-async-container>


<ng-template #noResultsMessage>
  <div *ngIf="!(loadingResults$ | async)" class="no-results-message-container">
    No results. Please change your filter criteria and search again.
  </div>
</ng-template>

<pf-job-details-tooltip
  *ngIf="tooltipData"
  [job]="tooltipData.Job"
  [tooltipLeftPx]="tooltipData.TargetX"
  [tooltipTopPx]="tooltipData.TargetY"
  [visible]="showTooltip">
</pf-job-details-tooltip>
