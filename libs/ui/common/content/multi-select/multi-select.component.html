<div class="multi-select-container">
  <div class="d-flex">
    <label class="main-label mr-2 pt-2">{{ labelText }}</label>
    <div class="d-inline-block">
      <a href="javascript:void(0)" (click)="toggleCheckboxPanel()" class="text-decoration-none">
        <span class="select-facade d-inline-block rounded p-1 pt-2">
          <label class="d-inline-block mb-0 ellipsis-overflowing-text pr-0 pl-2" [ngbTooltip]="selectedOptionNames">{{ selectedOptionNames }}</label>
          <i class="fas fa-angle-down d-inline-block ml-2"></i>
        </span>
      </a>
    </div>
  </div>
  <div *ngIf="isExpanded$ | async" class="selections-container position-absolute">
    <span *ngIf="isLoading$ | async" class="loading d-block mt-2 mb-2 text-center">
      <pf-loading-indicator></pf-loading-indicator>
    </span>
    <div *ngIf="!(isLoading$ | async)">
      <i class="fas fa-search position-absolute"></i>
      <input type="text" [(ngModel)]="searchTerm" class="form-control d-block mt-2" placeholder="Search" />
      <a href="javascript:void(0)" (click)="clearSearchTerm()" class="position-absolute text-muted">
        <i class="fas fa-times"></i>
      </a>
      <button (click)="clearSelections()" class="clear-selections btn d-block mt-2 mb-2">Clear Selections</button>
      <div class="checkbox-container">
        <ng-container *ngFor="let option of options; trackBy: trackByFn">
          <label 
            *ngIf="option.DisplayName.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1"
            class="checkbox-label d-block ellipsis-overflowing-text m-0"
            [class.isSelected]="option.IsSelected"
          >
            <input type="checkbox" (change)="toggleCheckbox(option)" [(ngModel)]="option.IsSelected" class="mr-1" />{{ option.DisplayName }}
          </label>
        </ng-container>
        <label class="no-results font-italic text-center d-block">No Results Found</label>
      </div>
    </div>
  </div>
</div>
