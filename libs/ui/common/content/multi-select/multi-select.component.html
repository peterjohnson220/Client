<div class="multi-select-container"  pfClickElsewhere (clickElsewhere)="clickElsewhere()">
  <div class="d-flex">
    <label class="main-label mr-2 pt-2">{{ labelText }}</label>
    <div class="d-inline-block">
      <a href="javascript:void(0)" (click)="toggleCheckboxPanel()" class="text-decoration-none">
        <span class="select-facade d-inline-block rounded">
          <label class="d-inline-block mb-0 ellipsis-overflowing-text pr-0 pl-2" [ngbTooltip]="getSelectionsString()">
            {{ getSelectionsString() }}
          </label>
          <fa-icon icon="angle-down" class="d-inline-block ml-2"></fa-icon>
        </span>
      </a>
    </div>
  </div>
  <div *ngIf="isExpanded" class="selections-container position-absolute">
    <span *ngIf="isLoading" class="loading d-block mt-2 mb-2 text-center">
      <pf-loading-indicator></pf-loading-indicator>
    </span>
    <div *ngIf="!(isLoading)">
      <fa-icon icon="search" class="fa-search-icon position-absolute"></fa-icon>
      <input type="text" [(ngModel)]="searchTerm" class="form-control d-block mt-2" placeholder="Search" />
      <a href="javascript:void(0)" (click)="clearSearchTerm()" class="position-absolute text-muted">
        <fa-icon icon="times"></fa-icon>
      </a>
      <button [disabled]="!hasSelections()" (click)="clearSelections()" class="clear-selections btn d-block mt-2 mb-2">Clear Selections</button>
      <div class="checkbox-container" (change)="emitChanges()">
        <ng-container *ngFor="let option of options; trackBy: trackByFn; let i=index;" >
          <label  class="checkbox-label d-block ellipsis-overflowing-text m-0" *ngIf="option.DisplayName.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1" [ngClass]="highlightSelected && option.IsSelected? 'highlight' :''">
            <input type="checkbox" [(ngModel)] = "option.IsSelected"  class="mr-1">{{ option.DisplayName }}
          </label>
        </ng-container>
        <label class="no-results font-italic text-center d-block">No Results Found</label>
      </div>
    </div>
  </div>
</div>
