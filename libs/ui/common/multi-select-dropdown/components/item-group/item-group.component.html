<ng-container *ngIf="localItemGroup?.Items?.length > 1; else singleItemTemplate">
  <div class="d-flex flex-row header" (click)="toggleShowItems()">
    <div [class.hidden]="localItemGroup?.Items?.length === 1" class="icon" [attr.data-qa-id]="'cnt-showItems'" title="Show Items">
      <fa-icon [ngClass]="!showItems ? '' : 'hidden'" icon="caret-right"></fa-icon>
      <fa-icon [ngClass]="showItems ? '' : 'hidden'" icon="caret-down"></fa-icon>
    </div>
    <input type="checkbox" class="k-checkbox select-all-checkbox"
      id="selectall-checkbox-{{localItemGroup?.GroupIndex}}"
      [attr.data-qa-id]="'chk-selectall'"
      (click)="handleSelectAllClicked()">
    <label class="k-checkbox-label" for="selectall-checkbox-{{localItemGroup?.GroupIndex}}"></label>
    <div class="title">{{localItemGroup?.Title}}</div>
  </div>
  <div *ngIf="localItemGroup?.Items?.length > 1 && showItems" class="d-flex flex-column items">
    <ng-container *ngFor="let item of localItemGroup.Items; trackBy: trackByFn">
      <ng-container [ngTemplateOutlet]="itemTemplate" [ngTemplateOutletContext]="{item: item}"></ng-container>
    </ng-container>
  </div>
</ng-container>

<ng-template #singleItemTemplate>
  <ng-container *ngIf="localItemGroup?.Items?.length === 1"
    [ngTemplateOutlet]="itemTemplate"
    [ngTemplateOutletContext]="{item: localItemGroup.Items[0]}">
  </ng-container>
</ng-template>

<ng-template #itemTemplate let-item="item">
  <div *ngIf="!!item" class="item d-flex"
    [attr.data-qa-id]="'cnt-select-item'"
    (click)="handleItemClicked(item)">
    <input type="checkbox" class="k-checkbox"
      [ngModel]="item.IsSelected">
    <label class="k-checkbox-label" for="item-checkbox-{{item.GroupIndex}}"></label>
    <div class="title">{{item.Value}}</div>
  </div>
</ng-template>