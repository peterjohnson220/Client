<div class="filter-sidebar">

  <div class="filter-header">
     <pf-exchange-job-selector
     *ngIf="((payMarket$ | async)?.CompanyPayMarketId) && shouldShowPayMarketBoundsFilter && !!(associatedJobs$ | async)?.length"
     [shouldDisplayJobTitleShort]="!(excludeIndirectJobMatches$ | async)"
     [exchangeJobSelectorItems]="associatedJobs$ | async"
     [selectedExchangeJobId]="selectedExchangeJobId$ | async"
     (exchangeJobSelected)="handleExchangeJobSelected($event)">
     </pf-exchange-job-selector>
    <pf-pay-market-bounds-filter
      *ngIf="((payMarket$ | async)?.CompanyPayMarketId) && shouldShowPayMarketBoundsFilter"
      [enabled]="limitToPayMarket$ | async"
      [payMarket]="payMarket$ | async"
      (limitToPayMarketToggled)="handleLimitToPayMarketToggled()">
    </pf-pay-market-bounds-filter>
    <pf-exclude-indirect-matches-filter
      *ngIf="shouldShowExcludeIndirectJobMatchesFilter && (hasAdditionalJobLevels$ | async)"
      [enabled]="excludeIndirectJobMatches$ | async"
      (filterToggled)="handleIncludeAdditionalJobLevelsToggled()"
    ></pf-exclude-indirect-matches-filter>

    <pf-scope-selector *ngIf="((payMarket$ | async)?.CompanyPayMarketId) && shouldShowExchangeScopeSelector"
                       [addDataModal]="true">
    </pf-scope-selector>

    <pf-peer-filter-info
      [orgCount]="(mapSummary$ | async)?.OverallMapStats.CompanyCount"
      [incCount]="(mapSummary$ | async)?.OverallMapStats.SalaryCount"
      [hasSelections]="(selectionsCount$ | async) > 0"
      (clearFiltersLinkClicked)="handleClearAllSelections()">
    </pf-peer-filter-info>
  </div>

  <div class="aggregate-groups-container" [class.searching]="searchingAggregate$ | async">

    <div class="back-to-all-filters"
         *ngIf="searchingAggregate$ | async"
         (click)="onBackToAllFiltersClick()">
      < Back To All Filters
    </div>

    <pf-filter-aggregate-group
      *ngFor="let aggregateGroup of (filterAggregateGroups$ | async); trackBy: trackByFilterProp"
      [aggregateGroup]="aggregateGroup"
      [previewLimit]="previewLimit$ | async"
      [searching]="searchingAggregate$ | async"
      (aggregateToggled)="handleAggregateToggled($event)"
      (aggregateGroupSelectionsToggled)="handleAggregateGroupSelectionsToggled($event)"
      (searchEvent)="handleSearchEvent($event)"
    >
    </pf-filter-aggregate-group>

  </div>

</div>




