<div class="filter-sidebar">

  <div class="filter-header">
     <pf-associated-exchange-job-list 
     *ngIf="((payMarket$ | async)?.CompanyPayMarketId) && shouldShowPayMarketBoundsFilter"
      [associatedExchangeJobs]="associatedJobs$ | async">
     </pf-associated-exchange-job-list>
    <pf-pay-market-bounds-filter
      *ngIf="((payMarket$ | async)?.CompanyPayMarketId) && shouldShowPayMarketBoundsFilter"
      [enabled]="limitToPayMarket$ | async"
      [payMarket]="payMarket$ | async"
      (limitToPayMarketToggled)="handleLimitToPayMarketToggled()">
    </pf-pay-market-bounds-filter>
    <pf-exclude-indirect-matches-filter
      *ngIf="shouldShowExcludeIndirectJobMatchesFilter && (hasAdditionalJobLevels$ | async)"
      [enabled]="excludeIndirectJobMatches$ | async"
      (filterToggled)="handleIncludeAdditionalJobLevelsToggled()"
    ></pf-exclude-indirect-matches-filter>

    <pf-scope-selector *ngIf="((payMarket$ | async)?.CompanyPayMarketId) && shouldShowExchangeScopeSelector"
                       [addDataModal]="true">
    </pf-scope-selector>

    <pf-peer-filter-info
      [orgCount]="(mapSummary$ | async)?.OverallMapStats.CompanyCount"
      [incCount]="(mapSummary$ | async)?.OverallMapStats.SalaryCount"
      [hasSelections]="(selectionsCount$ | async) > 0"
      (resetAllFiltersClicked)="handleClearAllSelections()">
    </pf-peer-filter-info>
  </div>

  <div class="aggregate-groups-container">
    <pf-filter-aggregate-group
      *ngFor="let aggregateGroup of (filterAggregateGroups$ | async); trackBy: trackByFilterProp"
      [aggregateGroup]="aggregateGroup"
      [previewLimit]="previewLimit$ | async"
      (aggregateToggled)="handleAggregateToggled($event)"
      (aggregateGroupSelectionsToggled)="handleAggregateGroupSelectionsToggled($event)">
    </pf-filter-aggregate-group>
  </div>

</div>




