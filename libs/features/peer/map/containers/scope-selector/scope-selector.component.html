<div class="scope-selector-container"
     [ngClass]="{'custom-modal-popover custom-modal-arrow': addDataModal, 'custom-map-popover custom-map-arrow scope-selector-no-padding': !addDataModal}">
  <button type="button"
          class="btn btn-secondary selector"
          [disabled]="(exchangeScopeItems$ | async)?.length === 0"
          [ngbPopover]="popContent"
          popoverTitle="Select a Scope"
          [placement]="addDataModal ? 'right' : 'bottom-right'"
          #p="ngbPopover">

    <span class="selector-caret">
      <i *ngIf="addDataModal" class="fas fa-caret-right"></i>
      <i *ngIf="!addDataModal" class="fas fa-caret-down"></i>
    </span>

    <span class="selector-label text-muted">Exchange Scope:</span>

    <span class="selection" [title]="(selectedExchangeScopeItem$ | async)?.Name || ''" [class.no-selection]="!(selectedExchangeScopeItem$ | async)">
      {{(selectedExchangeScopeItem$ | async)?.Name || "No Selection"}}
    </span>

  </button>

</div>

<ng-template #popContent>
  <div class="d-flex flex-column h-100">
    <div class="popover-content">

      <div *ngFor="let exchangeScopeItem of exchangeScopeItems$ | async"
          (click)="handleExchangeScopeClicked(exchangeScopeItem)"
          class="exchange-scope-selection"
          [class.selected-scope]="itemSelected(exchangeScopeItem)">

        <div class="d-flex justify-content-between">

          <div class="ellipsis-overflowing-text">
            {{exchangeScopeItem.Name}}
          </div>

        </div>

      </div>
    </div>

  </div>

</ng-template>
