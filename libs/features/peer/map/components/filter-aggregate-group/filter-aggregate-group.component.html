
<div class="aggregate-group" [class.collapsed]="collapsed">

  <!--Header-->
  <div class="aggregate-group-header" (click)="collapsed = !collapsed">
    <div class="header-left space-out-children-right">
      <div>
        <input type="checkbox" [ngModel]="allOptionsSelected" (click)="handleSelectAllChecked($event)">
      </div>
      <div>
        {{categoryLabel}}
      </div>
    </div>

    <div class="header-right">
      <div class="reset-link" *ngIf="hasSelections" (click)="handleResetClicked($event)">
        Reset ({{selectionsCount}})
      </div>

      <div *ngIf="collapsed">
        <fa-icon [icon]="['far', 'angle-down']"></fa-icon>
      </div>
      <div *ngIf="!collapsed">
        <fa-icon [icon]="['far', 'angle-up']"></fa-icon>
      </div>
    </div>

  </div>

  <!--Options-->
  <div class="aggregate-container" [class.show-all]="showAllAggregates">
    <ng-container *ngIf="filterAggregates.length; else noAggregateItems">
      <pf-filter-aggregate
        *ngFor="let filterAggregate of filterAggregates;trackBy: trackById"
        [aggregate]="filterAggregate"
        (aggregateSelected)="handleAggregateSelected($event)">
      </pf-filter-aggregate>
    </ng-container>

    <ng-template #noAggregateItems>
      <div class="pl-3">No Data</div>
    </ng-template>
  </div>

  <!--Options Toggle-->
  <div *ngIf="aggregateGroup.Aggregates.length > previewLimit"
       (click)="showAllAggregates = !showAllAggregates"
       class="toggle-option-height">

    Show

    <span *ngIf="!showAllAggregates">
      {{aggregateGroup.Aggregates.length - aggregateGroup.AggregatesPreview.length}} More <fa-icon [icon]="['far', 'angle-down']"></fa-icon>
    </span>

    <span *ngIf="showAllAggregates">
      Less <fa-icon [icon]="['far', 'angle-up']"></fa-icon>
    </span>
  </div>

</div>
