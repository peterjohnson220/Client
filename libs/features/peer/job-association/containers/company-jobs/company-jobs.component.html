<h2>Company Jobs</h2>
<div class="d-flex">
  <i class="fas fa-search"></i>
  <input type="text" placeholder="Accountant" />
  <label>
    <input type="checkbox" />
    Associated
  </label>
  <label class="testClass">Job Family:</label>
  <label>
    <select>
      <option value="1">Airline</option>
      <option value="2">Accounting</option>
      <option value="3">Restaurant</option>
    </select>
  </label>
</div>
<label>
  company jobs: {{ totalCompanyJobsGridItems$ | async }} total
</label>
<ng-template #template let-anchor>
  <span>{{ anchor.nativeElement.innerText }}</span>
</ng-template>
<div class="grid-container position-relative">
  <pf-async-container
    class="h-100"
    [loading]="loading$ | async"
    [loadingError]="loadingError$ | async"
    [loadingErrorMessage]="'Error loading company jobs'"
    (reload)="reload()"
  >
  <div class="k-tooltip-container"
       kendoTooltip
       showOn="none"
       [tooltipTemplate]="template"
       filter=".k-grid td"
       (mouseover)="showTooltip($event)">
    <kendo-grid
                [data]="companyJobsGridItemsData$ | async"
                [style.height.%]="100"
                [pageSize]="(gridState$ | async)?.take"
                [skip]="(gridState$ | async)?.skip"
                [sort]="(gridState$ | async)?.sort"
                [filter]="(gridState$ | async)?.filter"
                [sortable]="true"
                [resizable]="true"
                [pageable]="{
                  buttonCount: 5,
                  info: true
                 }"
                (dataStateChange)="handleDataStateChange($event)">
      <kendo-grid-column field="CompanyJobId" title="Id" hidden="true"></kendo-grid-column>
      <kendo-grid-column field="JobTitle" title="Job Title"></kendo-grid-column>
      <kendo-grid-column field="JobCode" title="Job Code"></kendo-grid-column>
      <kendo-grid-column field="JobFamily" [sortable]="false" title="Job Family">
        <ng-template kendoGridCellTemplate let-dataItem>
          <span *ngIf="dataItem.JobFamily === null; else hasFamily">No Family</span>
          <ng-template #hasFamily>
            {{ dataItem.JobFamily }}
          </ng-template>
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column field="AssociationStatus" title="Status" [sortable]="false">
        <ng-template kendoGridCellTemplate let-dataItem>
          <span *ngIf="dataItem.IsAssociated">Associated</span>
          <span *ngIf="!dataItem.IsAssociated">Not Associated</span>
        </ng-template>
      </kendo-grid-column>
    </kendo-grid>
  </div>
  </pf-async-container>
</div>

