<div>
  <div *ngIf="!validSchedule">
    <div class="alert alert-danger" role="alert">
      Save Schedule failed. Please enter a valid schedule.
    </div>
  </div>
  <div class="row pb-3">
    <div class="col-sm-12 col-md-4 pr-0">
      <h5 for="filename" class="text-primary">File Name <span class="text-danger">*</span></h5>
    </div>
    <div class="col-sm-12 col-md-4">
      <input type="text" class="form-control" id="filename" name="filename" [(ngModel)]="schedule.FileName" [disabled]="editing">
    </div>
  </div>
  <div class="row pb-3">
    <div class="col-sm-12 col-md-4 pr-0">
      <h5 for="view" class="text-primary">Select Content to Export <span class="text-danger">*</span></h5>
    </div>
    <div class="col-sm-12 col-md-4">
      <select id="view" class="form-control" [(ngModel)]="schedule.ViewId">
        <option *ngFor="let view of views" [ngValue]="view.Id">{{view.Name}}</option>
      </select>
    </div>
  </div>
  <div class="row pb-3">
    <div class="col-sm-12 col-md-4 pr-0">
      <h5 for="filter" class="text-primary">Select Jobs to Export <span class="text-danger">*</span></h5>
    </div>
    <div class="col-sm-12 col-md-4">
      <select id="filter" class="form-control" [(ngModel)]="schedule.Filter">
        <option>All</option>
        <option *ngFor="let filter of filters" [ngValue]="filter.Name">{{filter.Name}}</option>
      </select>
    </div>
  </div>
  <div class="row pb-3" *ngIf="!exportType">
    <div class="col-sm-12 col-md-4 pr-0">
      <h5 for="fileType" class="text-primary">Select File Type <span class="text-danger">*</span></h5>
    </div>
    <div class="col-sm-12 col-md-4">
      <div class="row">
        <div class="col">
          <select id="fileType" class="form-control" [(ngModel)]="schedule.Format" (change)="onScheduleFormatChange()">
            <option value="xlsx">Excel</option>
            <option value="csv">CSV</option>
          </select>
        </div>
      </div>
    </div>
  </div>
  <div class="row pb-3" *ngIf="schedule.Format === 'csv'">
    <div class="col-sm-12 col-md-4 pr-0">
      <h5 for="formatSeparatorType" class="text-primary">Separator Type <span class="text-danger">*</span></h5>
    </div>
    <div class="col-sm-12 col-md-4">
      <select id="formatSeparatorType" class="form-control" [(ngModel)]="schedule.FormatSeparatorType">
        <option value="comma">Comma</option>
        <option value="tab">Tab</option>
        <option value="pipe">Pipe</option>
      </select>
    </div>
  </div>
  <div class="row pb-3" *ngIf="!exportType">
    <div class="col-sm-12 col-md-4 pr-0">
      <h5 for="includeDelimiters" class="text-primary">Include Delimiters</h5>
    </div>
    <div class="col-sm-12 col-md-2">
      <select id="includeDelimiters" class="form-control" [disabled]="schedule.IncludeFormatting" [(ngModel)]="schedule.IncludeDelimiters">
        <option [ngValue]="true">Yes</option>
        <option [ngValue]="false">No</option>
      </select>
    </div>
  </div>
  <div class="row pb-3">
    <div class="col-sm-12 col-md-4 pr-0">
      <h5 for="includeFormatting" class="text-primary">Include Formatting</h5>
    </div>
    <div class="col-sm-12 col-md-2">
      <select id="includeFormatting" class="form-control" [disabled]="schedule.IncludeDelimiters" [(ngModel)]="schedule.IncludeFormatting">
        <option [ngValue]="true">Yes</option>
        <option [ngValue]="false">No</option>
      </select>
    </div>
  </div>
  <div class="row pb-3" *ngIf="exportType">
		<div class="col-sm-12 col-md-4 pr-0">
		  <h5 for="fileType" class="text-primary">Select Json Type <span class="text-danger">*</span></h5>
		</div>
		<div class="col-sm-12 col-md-4">
		  <div class="row">
			<div class="col">
			  <select id="jsonType" class="form-control" [(ngModel)]="schedule.ComplexJsonExport">
				<option value="true">Complex</option>
				<option value="false">Flat</option>
			  </select>
			</div>
		  </div>
		</div>
	</div>
  <div class="row pb-3">
    <div class="col-sm-12 col-md-4 pr-0">
      <h5 for="frequency" class="text-primary">Select Frequency <span class="text-danger">*</span></h5>
    </div>
    <div class="col">
      <div class="row">
        <div class="col"><input type="radio" name="frequency" value="One-time" [(ngModel)]="schedule.Frequency" (change)="onFrequencyChange()"> One-time</div>
        <div class="col"><input type="radio" name="frequency" value="Weekly" [(ngModel)]="schedule.Frequency" (change)="onFrequencyChange()"> Weekly</div>
        <div class="col"><input type="radio" name="frequency" value="Monthly" [(ngModel)]="schedule.Frequency" (change)="onFrequencyChange()"> Monthly</div>
      </div>
    </div>
  </div>
  <div class="row mt-3" *ngIf="schedule.Frequency === 'One-time'">
    <div class="col"><p>The export will be sent to your sFTP site upon save</p></div>
  </div>
  <div class="row mt-3" *ngIf="schedule.Frequency === 'Weekly'">
    <div class="col">
      <div class="row">
        <div class="col-sm-12 col-md-3"><input [checked]="daysOfWeekSelected?.includes('1')" type="checkbox" name="dayOfWeek" id="weeklySunday" value="1" (change)="onDayOfWeekChange($event)"> <label for="weeklySunday" class="weekly-checkbox pl-1"> Sunday</label></div>
        <div class="col-sm-12 col-md-3"><input [checked]="daysOfWeekSelected?.includes('2')" type="checkbox" name="dayOfWeek" id="weeklyMonday" value="2" (change)="onDayOfWeekChange($event)"> <label for="weeklyMonday" class="weekly-checkbox pl-1"> Monday</label></div>
        <div class="col-sm-12 col-md-3"><input [checked]="daysOfWeekSelected?.includes('3')" type="checkbox" name="dayOfWeek" id="weeklyTuesday" value="3" (change)="onDayOfWeekChange($event)"> <label for="weeklyTuesday" class="weekly-checkbox pl-1"> Tuesday</label></div>
        <div class="col-sm-12 col-md-3"><input [checked]="daysOfWeekSelected?.includes('4')" type="checkbox" name="dayOfWeek" id="weeklyWednesday" value="4" (change)="onDayOfWeekChange($event)"> <label for="weeklyWednesday" class="weekly-checkbox pl-1"> Wednesday</label></div>
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-3"><input [checked]="daysOfWeekSelected?.includes('5')" type="checkbox" name="dayOfWeek" id="weeklyThursday" value="5" (change)="onDayOfWeekChange($event)"> <label for="weeklyThursday" class="weekly-checkbox pl-1"> Thursday</label></div>
        <div class="col-sm-12 col-md-3"><input [checked]="daysOfWeekSelected?.includes('6')" type="checkbox" name="dayOfWeek" id="weeklyFriday" value="6" (change)="onDayOfWeekChange($event)"> <label for="weeklyFriday" class="weekly-checkbox pl-1"> Friday</label></div>
        <div class="col-sm-12 col-md-3"><input [checked]="daysOfWeekSelected?.includes('7')" type="checkbox" name="dayOfWeek" id="weeklySaturday" value="7" (change)="onDayOfWeekChange($event)"> <label for="weeklySaturday" class="weekly-checkbox pl-1"> Saturday</label></div>
      </div>
    </div>
  </div>
  <div class="row mt-3" *ngIf="schedule.Frequency === 'Monthly'">
    <div class="col-sm-12 col-md-3 pt-2">
      <select [(ngModel)]="schedule.Occurrence" class="form-control">
        <option value="1">First</option>
        <option value="2">Second</option>
        <option value="3">Third</option>
        <option value="4">Fourth</option>
      </select>
    </div>
    <div class="col-sm-12 col-md-3 pt-2">
      <select [(ngModel)]="schedule.DayOfWeek" class="form-control">
        <option value="1">Sunday</option>
        <option value="2">Monday</option>
        <option value="3">Tuesday</option>
        <option value="4">Wednesday</option>
        <option value="5">Thursday</option>
        <option value="6">Friday</option>
        <option value="7">Saturday</option>
      </select>
    </div>
    <div class="col-sm-4 pt-2">
      <div class="input-group">
        <span class="input-group-text bg-transparent border-0" id="month-wrapping">of every</span>
        <input type="text" class="form-control" [(ngModel)]="schedule.MonthlyOccurrence">
        <span class="input-group-text bg-transparent border-0" id="month-wrapping">month(s)</span>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 text-right pt-3">
      <button class="btn btn-primary px-4" (click)="submitForm()">Save</button>
    </div>
  </div>
</div>
