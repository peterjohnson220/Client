<pf-async-container [loading]="loading$ | async">
  <kendo-grid
    [data]="data$ | async"
    [pageSize]="pageSize$ | async"
    [skip]="skip$ | async"
    [pageable]="getPagingBarConfig()"
    [scrollable]="isCompact ? 'none' : 'scrollable'"
    [resizable]="isCompact ? false : true"    
    [rowClass]="selectedRowClass"
    (pageChange)="onPageChange($event)"
    (cellClick)="onCellClick($event)">
    <ng-container *ngFor="let col of (dataFields$ | async)">
      <ng-container *ngIf="showColumn(col)">
        <kendo-grid-column 
          [field]="mappedColumnName(col)"
          [title]="col.DisplayName"
          [headerStyle]="{'font-weight': 'bold', 'text-align': 'center', 'vertical-align': 'middle'}"
          [style]="{'text-align': col.TextAlign}"
          [width]="isCompact ? null : col.Width"
          [minResizableWidth]="30">
          <ng-template kendoGridCellTemplate let-dataItem>
            <ng-container *ngIf="getColumnType(col) === 'dateTime'">
              {{dataItem[mappedColumnName(col)] | date: 'MM/dd/yyyy' }}
            </ng-container>
            <ng-container *ngIf="getColumnType(col) === 'currency'">
              {{dataItem[mappedColumnName(col)]/1000.0 | number:'1.0-1' }}
            </ng-container>
            <ng-container *ngIf="getColumnType(col) === 'template'" [ngTemplateOutlet]="columnTemplates[col.SourceName]"
              [ngTemplateOutletContext]="{dataRow:dataItem}">
            </ng-container>
            <ng-container *ngIf="getColumnType(col) === 'default'">
              {{dataItem[mappedColumnName(col)]}}
            </ng-container>
          </ng-template>
        </kendo-grid-column>
      </ng-container>
    </ng-container>
  </kendo-grid>
</pf-async-container>
