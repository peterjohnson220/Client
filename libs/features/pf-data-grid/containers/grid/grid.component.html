<pf-async-container [loading]="loading$ | async">
  <kendo-grid
    [data]="data$ | async"
    [pageSize]="pageSize$ | async"
    [skip]="skip$ | async"
    [pageable]="getPagingBarConfig()"
    [scrollable]="isCompact ? 'none' : 'scrollable'"
    [resizable]="isCompact ? false : true"
    [kendoGridSelectBy]="primaryKey"
    [selectedKeys]="selection"
    (pageChange)="pageChange($event)">
    <ng-container *ngFor="let col of (dataFields$ | async)">
      <ng-container *ngIf="showColumn(col)">
        <kendo-grid-column 
          [field]="mappedColumnName(col)"
          [title]="col.DisplayName"
          [headerStyle]="{'font-weight': 'bold'}"
          [width]="isCompact ? null : 200"
          [minResizableWidth]="30">
          <ng-template kendoGridCellTemplate let-dataItem>
            <ng-container *ngIf="!columnTemplates || !columnTemplates[col.SourceName]">
              {{dataItem[mappedColumnName(col)]}}
            </ng-container>
            <ng-container *ngIf="columnTemplates && columnTemplates[col.SourceName]" 
              [ngTemplateOutlet]="columnTemplates[col.SourceName]"
              [ngTemplateOutletContext]="{dataRow:dataItem}">
            </ng-container>
            <!-- <ng-container *ngIf="col.DataType === 'template' && columnTemplates[col.SourceName]" 
              [ngTemplateOutlet]="columnTemplates[col.SourceName]"
              [ngTemplateOutletContext]="{parameters:getValue(dataItem, col.ChildColumns)}">
            </ng-container> -->
          </ng-template>
        </kendo-grid-column>
      </ng-container>
    </ng-container>
  </kendo-grid>
</pf-async-container>
